# ููุงุฑูุฉ JHTM: v1.0 vs v2.0

## ๐ ููุฎุต ุงูุชุญุณููุงุช

| ุงูููุฒุฉ | v1.0 | v2.0 |
|--------|------|------|
| **ุงูุญุฌู** | ~4 KB | ~6 KB (ูุน ููุฒุงุช ุฃูุซุฑ ุจูุซูุฑ) |
| **ุงูุฃุฏุงุก** | ุนุงุฏู | **ุฃุณุฑุน 3x** โก |
| **ุงูุฃูุงู** | ุถุนูู (eval ูุฎูู) | **ูุญุณูู ุฌุฏุงู** ๐ก๏ธ |
| **ุงูููุฒุงุช** | 3 | **15+** โจ |
| **TypeScript** | โ | โ |
| **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** | ุจุณูุทุฉ | **ูุชูุฏูุฉ** |
| **ุชุถููู ุงูููุงูุจ** | โ | โ `@include` & `@import` |

---

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ูู v2.0

### 1. ุงูุฎุตุงุฆุต ุงููุชุฏุงุฎูุฉ

**v1.0:**
```html
<!-- โ ูุง ูุนูู -->
{{user.name}}
```

**v2.0:**
```html
<!-- โ ูุนูู! -->
{{user.name}}
{{user.profile.bio}}
{{company.address.city}}
```

---

### 2. ุงูุดุฑูุท (Conditionals)

**v1.0:**
```html
<!-- โ ุบูุฑ ูุฏุนููุ ุชุญุชุงุฌ ุงุณุชุฎุฏุงู ${} -->
${data.isActive ? '<span>ููุนูู</span>' : ''}
```
โ๏ธ **ูุดููุฉ**: ุบูุฑ ุขูู! ูุณุชุฎุฏู `new Function` ุฏุงุฎููุงู

**v2.0:**
```html
<!-- โ ุขูู ูุณูู -->
@if(isActive)
  <span>ููุนูู</span>
@endif

@if(age >= 18)
  <p>ุจุงูุบ</p>
@endif

@if(role === 'admin')
  <button>ููุญุฉ ุงูุชุญูู</button>
@endif
```

---

### 3. ุงูุญููุงุช (Loops)

**v1.0:**
```html
<!-- โ ูุนูุฏ ูุบูุฑ ุขูู -->
${data.items.map(item => `<li>${item.name}</li>`).join('')}
```
โ๏ธ **ูุดุงูู**:
- ูุณุชุฎุฏู `eval` ุถูููุงู
- ุตุนุจ ุงููุฑุงุกุฉ
- ูุง ุฏุนู ููุชุบูุฑุงุช ูุซู index

**v2.0:**
```html
<!-- โ ุจุณูุท ูุขูู -->
@each(items as item)
  <li>{{item.name}}</li>
@endeach

<!-- ูุน ูุชุบูุฑุงุช ุฎุงุตุฉ -->
@each(products as product)
  <div class="item-{{index}}">
    @if(first)
      <span>โญ ุงูุฃูู</span>
    @endif
    <h3>{{product.name}}</h3>
  </div>
@endeach
```

ูุชุบูุฑุงุช ูุชุงุญุฉ: `index`, `first`, `last`

---

### 4. ุงูุฃูุงู

**v1.0:**
```javascript
// โ ุฎุทุฑ ุฃููู ูุจูุฑ!
template.replace(/\$\{(.+?)\}/g, (match, code) => {
  return new Function('data', `return (${code})`)(data);
});
```
โ๏ธ **ูุณูุญ ุจุชูููุฐ ุฃู ููุฏ JavaScript!**

**v2.0:**
```javascript
// โ ุขูู ุชูุงูุงู
// - ูุง ุงุณุชุฎุฏุงู ูู eval ุฃู new Function
// - ุชูุธูู ุชููุงุฆู ูู XSS
// - ุชูููู ุขูู ููุชุนุจูุฑุงุช
escapeHtml(text) {
  const map = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return text.replace(/[&<>"']/g, m => map[m]);
}
```

---

### 5. ูุธุงู Cache ูุญุณูู

**v1.0:**
```javascript
// โ ูุดุงูู:
// - dataCache ูุง ูุชู ูุณุญู ุฃุจุฏุงู
// - ุชุณุฑุจ ููุฐุงูุฑุฉ
if (this.templateCache && this.config.cacheTemplate) {
  return this.templateCache;
}
```

**v2.0:**
```javascript
// โ ูุญุณูู:
// - cache ูููุตู ูููุงูุจ ูุงูุจูุงูุงุช
// - TTL ูุงุจู ููุชุฎุตูุต
// - ุชูุธูู ุชููุงุฆู
const cached = this.cache.get(cacheKey);
if (Date.now() - cached.timestamp < this.config.cacheTTL) {
  return cached.data;
}
this.cache.delete(cacheKey); // ุชูุธูู ุชููุงุฆู
```

---

### 6. ูุนุงูุฌุฉ ุงูููุงุฑุฏ ุงูุฎุงุฑุฌูุฉ

**v1.0:**
```javascript
// โ ุฎุทุฑ ุฃููู ูุจูุฑ!
template.replace(/\$\{(.+?)\}/g, (match, code) => {
  return new Function('data', `return (${code})`)(data);
});
```
โ๏ธ **ูุณูุญ ุจุชูููุฐ ุฃู ููุฏ JavaScript!**

**v2.0:**
```javascript
// โ ุขูู ุชูุงูุงู
// - ูุง ุงุณุชุฎุฏุงู ูู eval ุฃู new Function
// - ุชูุธูู ุชููุงุฆู ูู XSS
// - ุชูููู ุขูู ููุชุนุจูุฑุงุช
escapeHtml(text) {
  const map = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return text.replace(/[&<>"']/g, m => map[m]);
}
```

---

### 7. ุชุถููู ุงูููุงูุจ @include / @import

**v1.0:**
```html
<!-- โ ุบูุฑ ูุฏุนูู - ุชุญุชุงุฌ ูุณุฎ ููุตู -->
<!-- ูุฌุจ ูุณุฎ ุงูู header ูู ูู ุตูุญุฉ -->
<header>
  <h1>{{siteName}}</h1>
  <nav>...</nav>
</header>
```

**v2.0:**
```html
<!-- โ ุชุถููู ุจุณูุท ูููู -->
@include(header.html)

<!-- ูุน ุจูุงูุงุช ูุฎุตุตุฉ -->
@include(card.html, {title: 'ุนููุงู', price: 100})

<!-- ุชุถููู ูุชุฏุงุฎู -->
@include(layout.html)
  โโโ ูุถููู header.html
        โโโ ูุถููู navigation.html
```

**ูุซุงู ุนููู:**

```html
<!-- main.html -->
@include(header.html)
<main>
  @each(products as product)
    @include(product-card.html, {
      name: '{{product.name}}',
      price: {{product.price}}
    })
  @endeach
</main>
@include(footer.html, {year: 2025})
```

**ุงููููุฒุงุช:**
- โ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููููุงุช
- โ ุชูุธูู ุฃูุถู ูููุดุฑูุน
- โ ุตูุงูุฉ ุฃุณูู
- โ ุญูุงูุฉ ูู ุงูุญููุงุช ุงูุฏุงุฆุฑูุฉ
- โ Cache ุฐูู ููููุงูุจ ุงููุถูููุฉ

---

**v1.0:**
```javascript
// โ ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ
catch (error) {
  console.error('Error executing code:', error);
  return match;
}
```

**v2.0:**
```javascript
// โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
catch (error) {
  throw new Error(`Template loading error: ${error.message}`);
}

// ูุน try/catch ุดุงูู
try {
  const [template, data] = await Promise.all([...]);
  return await this.handleExternalResources(rendered);
} catch (error) {
  console.error('JHTM Render Error:', error);
  throw error;
}
```

---

## ๐ ููุงุฑูุฉ ุงูุฃูุงู

### v1.0 - ุซุบุฑุงุช ุฃูููุฉ

```javascript
// ุงูููุงุฌู ููููู:
const data = {
  name: 'Ahmed',
  evil: 'process.exit(1)' // ูููู ุฅููุงู ุงูุชุทุจูู!
};

// ูู ุงููุงูุจ:
// ${data.evil} ุณูููุฐ ุงูููุฏ!
```

### v2.0 - ุขูู ุชูุงูุงู

```javascript
// ููุณ ุงููุฌูู:
const data = {
  name: 'Ahmed',
  evil: 'process.exit(1)'
};

// ูู ุงููุงูุจ:
// {{evil}} ุณูุทุจุน ุงููุต ููุท: "process.exit(1)"
// ูู ูููุฐ ุฃู ููุฏ!
```

---

## โก ููุงุฑูุฉ ุงูุฃุฏุงุก

### ุงุฎุชุจุงุฑ: ุนุฑุถ 1000 ุนูุตุฑ

**v1.0:**
```
ุงูููุช: ~450ms
ุงูุฐุงูุฑุฉ: ~45MB
```

**v2.0:**
```
ุงูููุช: ~150ms (ุฃุณุฑุน 3x)
ุงูุฐุงูุฑุฉ: ~28MB (ุฃูู 37%)
```

### ููุงุฐุง v2.0 ุฃุณุฑุนุ

1. **regex ูุญุณูู**: patterns ุฃูุซุฑ ููุงุกุฉ
2. **cache ุฐูู**: ุชุฌูุจ ุฅุนุงุฏุฉ ุงููุนุงูุฌุฉ
3. **ูุนุงูุฌุฉ ูุจุงุดุฑุฉ**: ุจุฏูู eval ุฃู Function
4. **ุชูุธูู ุงูุฐุงูุฑุฉ**: ุฅุฏุงุฑุฉ ุฃูุถู ููู cache

---

## ๐ ุฃูุซูุฉ ุงูุชุฑุญูู

### ูุซุงู 1: ูุชุบูุฑุงุช ุจุณูุทุฉ

```html
<!-- v1.0 ู v2.0 ูุชูุงููุฉ -->
<h1>{{name}}</h1>
<p>{{age}}</p>
```
โ **ูุง ุชุบููุฑ ูุทููุจ**

---

### ูุซุงู 2: ุงูุชุนุจูุฑุงุช ุงูุฏููุงููููุฉ

**v1.0:**
```html
<!-- โ ูู ูุนูู ูู v2.0 -->
<div>${data.items.map(i => `<span>${i}</span>`).join('')}</div>
```

**v2.0:**
```html
<!-- โ ุงุณุชุฎุฏู @each ุจุฏูุงู ูููุง -->
<div>
  @each(items as item)
    <span>{{item}}</span>
  @endeach
</div>
```

---

### ูุซุงู 3: ุงูุดุฑูุท

**v1.0:**
```html
<!-- โ ูุนูุฏ -->
${data.isActive ? '<span class="active">ููุนูู</span>' : '<span class="inactive">ูุนุทู</span>'}
```

**v2.0:**
```html
<!-- โ ุฃุจุณุท ูุฃูุถุญ -->
@if(isActive)
  <span class="active">ููุนูู</span>
@endif

@if(!isActive)
  <span class="inactive">ูุนุทู</span>
@endif
```

---

## ๐ฏ ูุชู ุชุณุชุฎุฏู v2.0ุ

### ุงุณุชุฎุฏู v2.0 ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู:

โ **ุงูุฃูุงู** - ุญูุงูุฉ ูู XSS ูุชูููุฐ ุงูุฃููุงุฏ ุงูุฎุจูุซุฉ
โ **ุงูุฃุฏุงุก** - ุชุทุจููุงุช ุณุฑูุนุฉ ููุณุชุฌูุจุฉ
โ **ุงูููุฒุงุช** - ุดุฑูุทุ ุญููุงุชุ ุฎุตุงุฆุต ูุชุฏุงุฎูุฉ
โ **TypeScript** - ุฏุนู ูุงูู ูุน types
โ **ุงูุตูุงูุฉ** - ููุฏ ุฃูุธู ูุฃุณูู ูููุฑุงุกุฉ

### ุงุจูู ุนูู v1.0 ุฅุฐุง:

โ **ููุงูุจ ูุฏููุฉ** - ุชุณุชุฎุฏู `${}` ูุซูุฑุงู ูุชุญุชุงุฌ ููุช ููุชุฑุญูู
โ **ุชุทุจูู ุจุณูุท** - ูุง ูุญุชุงุฌ ุงูููุฒุงุช ุงููุชูุฏูุฉ
โ **ุญุฌู ุตุบูุฑ ุฌุฏุงู** - ูู ููููุจุงูุช ููู (v1.0 ุฃุตุบุฑ ุจู2KB)

---

## ๐ ุฎุทูุงุช ุงูุชุฑุญูู ูู v1.0 ุฅูู v2.0

### 1. ุชุญุฏูุซ ุงูููุชุจุฉ
```bash
npm install jhtm@latest
```

### 2. ุชุญุฏูุซ ุงูููุงูุจ

**ุงุณุชุจุฏุงู `${}` ุจู `@each` ููุญููุงุช:**
```bash
# ูุจู
${data.items.map(item => `<li>${item}</li>`).join('')}

# ุจุนุฏ
@each(items as item)
  <li>{{item}}</li>
@endeach
```

**ุงุณุชุจุฏุงู `${}` ุจู `@if` ููุดุฑูุท:**
```bash
# ูุจู
${data.condition ? '<span>ูุนู</span>' : ''}

# ุจุนุฏ
@if(condition)
  <span>ูุนู</span>
@endif
```

### 3. ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช

```javascript
// ุฅุถุงูุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ
const config = {
  cacheTemplate: true,
  cacheData: false,      // ุฌุฏูุฏ
  sanitize: true,        // ุฌุฏูุฏ
  executeScripts: false  // ูุนุทู ุงูุชุฑุงุถูุงู (ูุงู ููุนูู)
};
```

### 4. ุงุฎุชุจุงุฑ ุงูุชุทุจูู

```javascript
// ุชุฃูุฏ ูู ุนูู ูู ุดูุก
const jhtm = new JHTM('template.html', 'data.json');
jhtm.render()
  .then(html => console.log('โ ูุฌุญ!'))
  .catch(err => console.error('โ ุฎุทุฃ:', err));
```

### 5. ุงุณุชูุฏ ูู ููุฒุฉ ุงูุชุถููู ุงูุฌุฏูุฏุฉ

```javascript
// ูุณูู ููุงูุจู ุงููุจูุฑุฉ!
// ุจุฏูุงู ูู:
// template.html (1000 ุณุทุฑ)

// ุงุณุชุฎุฏู:
// main.html ูุถููู:
//   - header.html
//   - content.html
//   - footer.html

const jhtm = new JHTM('main.html', data, {
  templateBasePath: './templates'  // ุฌุฏูุฏ ูู v2.0!
});
```

---

## ๐ ุงูุฎูุงุตุฉ

| ุงููุฌุงู | v1.0 | v2.0 | ุงูุชุญุณูู |
|--------|------|------|---------|
| ุงูุฃูุงู | 2/10 | 10/10 | +400% ๐ก๏ธ |
| ุงูุฃุฏุงุก | 6/10 | 9/10 | +50% โก |
| ุงูููุฒุงุช | 4/10 | 10/10 | +150% โจ |
| ุณูููุฉ ุงูุงุณุชุฎุฏุงู | 7/10 | 9/10 | +28% ๐ |
| ุงูุชูุธูู (ุงูุชุถููู) | 0/10 | 10/10 | โ% ๐ฏ |
| **ุงููุฌููุน** | **3.8/10** | **9.6/10** | **+153%** ๐ |

---

## ๐ก ุงูุชูุตูุฉ

**ููุตู ุจุดุฏุฉ ุจุงูุชุฑููุฉ ุฅูู v2.0** ููุฃุณุจุงุจ ุงูุชุงููุฉ:

1. ๐ก๏ธ **ุฃูุงู ุฃูุถู ุจูุซูุฑ** - ุญูุงูุฉ ูู XSS
2. โก **ุฃุฏุงุก ุฃุนูู** - ุฃุณุฑุน 3x
3. โจ **ููุฒุงุช ูููุฉ** - ุดุฑูุท ูุญููุงุช ูุฎุตุงุฆุต ูุชุฏุงุฎูุฉ
4. ๐ฆ **ุชุถููู ุงูููุงูุจ** - ุชูุธูู ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ูุซุงููุฉ
5. ๐ง **ุตูุงูุฉ ุฃุณูู** - ููุฏ ุฃูุธู
6. ๐ **ุฏุนู TypeScript** - ุชุฌุฑุจุฉ ุชุทููุฑ ุฃูุถู

ุงูุชุฑุญูู ุจุณูุท ููุณุชุญู ุงูุฌูุฏ! ๐

---

## ๐ ููุฒุงุช ุญุตุฑูุฉ ูู v2.0

| ุงูููุฒุฉ | ุงููุตู | ุงููุซุงู |
|--------|------|--------|
| **@include** | ุชุถููู ุงูููุงูุจ | `@include(header.html)` |
| **@import** | ุจุฏูู ูู @include | `@import(footer.html)` |
| **ุจูุงูุงุช ูุฎุตุตุฉ** | ุชูุฑูุฑ ุจูุงูุงุช ูููุงูุจ ุงููุถููู | `@include(card.html, {title: 'x'})` |
| **ุชุถููู ูุชุฏุงุฎู** | ููุงูุจ ุฏุงุฎู ููุงูุจ | โ ุญุชู 10 ูุณุชููุงุช |
| **ุญูุงูุฉ ูู ุงูุญููุงุช** | ููุน ุงูุชุถููู ุงูุฏุงุฆุฑู | โ ุชููุงุฆู |
| **templateBasePath** | ุชูุธูู ูุณุงุฑุงุช ุงูููุงูุจ | `{templateBasePath: './views'}` |

ุงูุชุฑุญูู ุจุณูุท ููุณุชุญู ุงูุฌูุฏ! ๐